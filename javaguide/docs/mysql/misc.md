### basic
* OS一页4KB。1M=256 page
* Mysql innodb的磁盘的页大小：16KB，也就是OS的4页
* 索引结构
    * B+树
    * 每个表必有一个聚簇索引。聚簇索引是物理有序。而普通索引是逻辑有序
    * 主键索引最好选长度小一点的，并且是自增的
        * 长度小是因为B+树的高度是由一个节点里能放多少个索引决定的。所以能放的索引越多，B+树高度越低，查的速度也就越快
        * 自增是因为，innodb的页是一页一页分好的，自增的话就很方便地加到下一个页，否则，得中间加进去。
            * 一个是数据块本身可能需要做麻烦的调整。需要变两个指针
            * 一个是索引也要做比直接加在后面复杂的调整。
    * B+树的索引的特点
        * 叶子节点存数据，还有双向指针维护之间的关系
            * >n的操作是很简单的
        * 一个节点能放多个索引。整个树的高度会是矮的。查询的速度块    
        

### 优化
#### 索引
* 主键用体积小的，自增的。
    * 索引的B+能够矮一点，查询快一点
    * 新来的记录直接往后加，不需要中间的移动
* 如果只取几个列，可以用覆盖索引。不用回表  
* 使用like的话，一定得是最左匹配。联合索引也是，必须是从索引的左边开始起作用

#### 查询方式
* 大的关联查询，可以分解成为多个小查询
* limit如果是偏移量很大的时候，尽量使用索引覆盖
* 怎么选择驱动表
    * 常理是选择数据量小的作为驱动表。但是最好交给mysql的查询优化器去选择
        * 所以不要用left join或者right join，因为这样驱动表的顺序就被定死了
        * 要用inner join。这样可以让mysql的查询优化器自己去选择

#### 数据库结构
* 大的，不常用的列，可以单独列出来到其他的表。  